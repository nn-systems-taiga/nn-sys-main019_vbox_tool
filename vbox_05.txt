@echo off
setlocal

::管理者かチェック
net session >nul 2>&1
if %errorlevel% neq 0 (
    powershell -Command "Start-Process -FilePath '%~f0' -Verb RunAs"
    exit /b
)

::データ設定
set "adapter=イーサネット"
set "ip=192.168.1.100"
set "mask=255.255.255.0"

::IPアドレスとサブネットマスクのみ設定(ゲートウェイなし)
netsh interface ipv4 set address name="%adapter%" static %ip% %mask% none

echo 完了しました。（ゲートウェイとDNSは設定していません）
pause


-----------------------------------------------
@echo off
setlocal

:: 管理者チェック
net session >nul 2>&1
if %errorlevel% neq 0 (
    echo 管理者権限が必要です。昇格を試みます...
    powershell -Command "Start-Process -FilePath '%~f0' -Verb RunAs"
    exit /b
)

::データ設定
set "adapter=イーサネット"

::IPアドレスをDHCPに設定
netsh interface ipv4 set address name="%adapter%" source=dhcp

::DNSをDHCPに設定
netsh interface ipv4 set dnsservers name="%adapter%" source=dhcp

echo DHCP設定に戻しました。
pause
